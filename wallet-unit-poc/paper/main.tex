%%%% IACR Transactions TEMPLATE %%%%
% This file shows how to use the iacrtrans class to write a paper.
% Written by Gaetan Leurent gaetan.leurent@inria.fr (2020)
% Public Domain (CC0)


%%%% 1. DOCUMENTCLASS %%%%
\documentclass{article}
%%%% NOTES:
% - Change "journal=tosc" to "journal=tches" if needed
% - Change "submission" to "final" for final version
% - Add "spthm" for LNCS-like theorems


%%%% 2. PACKAGES %%%%
\usepackage{authblk}
\usepackage{lipsum} % Example package -- can be removed
\usepackage{booktabs}
\usepackage{mdframed}
\usepackage{amsmath,amsfonts,amssymb}
\usepackage{geometry}
\usepackage{enumitem}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{pdflscape}
\usepackage{tabularx}
\usepackage{array}
\usepackage{ragged2e}
\newcolumntype{Y}{>{\raggedright\arraybackslash}X}
\setlength{\tabcolsep}{6pt}   
\renewcommand{\arraystretch}{1.12} 

\usepackage{framed}
\usepackage{tikz}
\usetikzlibrary{arrows.meta, positioning, shapes.multipart, fit}
\usepackage{multirow}   % for \multirow in the header
\usepackage{array}      % for p{...} column types and <{\centering}


\setcounter{MaxMatrixCols}{30}


%%% COMMANDS
\newcommand{\kwnote}[1]{\textsf{\color{red}{[{Keewoo: #1}]}}}
\newcommand{\jbel}[1]{{\color{blue}{}jbel: #1}}
\newcommand{\ndhy}[2]{{\color{blue}{}ndhy: #2}}
\newcommand{\rand}{\overset{{\scriptscriptstyle\$}}{\leftarrow}}

%%%% 3. AUTHOR, INSTITUTE %%%%
%\author{Jane Doe\inst{1,2} \and John Doe\inst{1}}
%\institute{
%  Institute A, City, Country, \email{jane@institute}
%  \and
%  Institute B, City, Country, \email{john@institute}
%}
%%%% NOTES:
% - We need a city name for indexation purpose, even if it is redundant
%   (eg: University of Atlantis, Atlantis, Atlantis)
% - \inst{} can be omitted if there is a single institute,
%   or exactly one institute per author

\author{The zkID Team @ PSE \\\href{mailto:pse-zkid@ethereum.org}{pse-zkid@ethereum.org}}
\affil{Ethereum Foundation}
% \institute{Ethereum Foundation}

%%%% 4. TITLE %%%%
% \title{Technical Overview: zkID for the EUDI Wallet}
\title{OpenAC: Open Design for Transparent and Lightweight Anonymous Credentials}
%%%% NOTES:
% - If the title is too long, or includes special macro, please
%   provide a "running title" as optional argument: \title[Short]{Long}
% - You can provide an optional subtitle with \subtitle.

\begin{document}

\maketitle


%%%% 5. KEYWORDS %%%%
% \nokeywords
% \keywords{Anonymous credentials \and Transparent \and Modular \and Lightweight \and zk-SNARKs \and Digital ID}


%%%% 6. ABSTRACT %%%%
\begin{abstract}
\input{abstract}
%  Main deliveries: 1. Technical report on zk component for the digital id wallet 2. A comparison with current works 3. Applying to EUDI.
\end{abstract}


%%%% 7. PAPER CONTENT %%%%
% \section{Introduction}
% \label{sec:introduction}
% Introducing DI and Selective disclosure. From Selective Disclosure to VCs lead to Anonymous credential.
% In Anonymous credential, talking about related works and their main approaches.
% \textit{In this section, we will present the definition of the scheme, the need for it, and our scope of work.}
% \input{intro.tex}
% \subsection{Problems and our scope of work}
% \begin{itemize}
%     \item What are we trying to solve, which pain points? 
%     \begin{itemize}
%         \item \textbf{\href{https://mirror.xyz/privacy-scaling-explorations.eth/zRM7qQSt_igfoSxdSa0Pts9MFdAoD96DD3m43bPQJT8}{This doc} dive deeper in the current problems and some current tool could be used \\ in future solutions}
%         \item \textbf{Answer described in this docs, \href{https://www.notion.so/pse-team/External-zkID-ZKP-Wallet-Unit-Proposal-1bad57e8dd7e80c98d73fc7e7666375d?pvs=25\#1bad57e8dd7e8059a446ca7b1dc31323}{Short-term Deliverables $\&$ Further Exploration}}
%         \item \textbf{And in this \href{https://pse.dev/en/projects/zk-id}{doc}} 
%     \end{itemize}
% \end{itemize}
% \subsection{Our achievements}
% \begin{itemize}
%     \item We need to describe zkID as simple as possible. What is it based on, like, well-known terms, and well-known algorithms?... \textit{I don't know the final zkID construction yet. Based on \href{https://pse-team.notion.site/zkID-Team-Strategy-Proposal-db3c5788dc7a4916a33e580a79177053}{\textbf{this proposal}}, I think there is a PoC construction, but I don't have access permission to it.}
%     \jbel{the full architecture and POC don't exist yet -- there are several streams going in parallel (some people thinking about architecture, some people benchmarking to inform that, some people creating a POC)}
%     \begin{itemize}
%         \item What are the main achievements, main results of our work?
%         \item What are the properties that our scheme satisfies?
%         \item What is the best experiment results and the environment of it?
%     \end{itemize} 
% \end{itemize}
% \subsection{Related work and how they make things right}
% \begin{itemize}
%     \item Before us, are there any solutions for these problems, and what are their pros and cons?
%     \begin{itemize}
%         \item \textbf{Overrall about current approaches is listed in \href{https://docs.google.com/presentation/d/1YROCEHK_t10wo5CukgYWmS1nuYKZi46NJBu-XZ8zXiw/edit?slide=id.p\#slide=id.p}{this presentation} (also in \href{https://docs.google.com/presentation/d/1HqFtSiS2hVHaSS8-u-8iecVFeMehMGBtZJnnbnXj83c/edit?slide=id.g34d4bb36836_0_262\#slide=id.g34d4bb36836_0_262}{this shorter version}), 
%  need to dig deeper to know how they solve these problems above.}
%         \item \textbf{\href{https://docs.google.com/presentation/d/1C4D8zK4gAdafgIEW-2m_qDyyT39gWo0mmFYpwmA8N3M/edit?slide=id.g312b09519cd_0_8\#slide=id.g312b09519cd_0_8}{This slide} also describe similar content but dive deeper in technical, and have the proposal design constraints.}
%         \begin{itemize}
%             \item Google solution: Tradeoffs and Considerations. 
%                 \begin{itemize}
%                     \item Pros: 
%                 \end{itemize}
                
%             \item Microsoft solution: Tradeoffs and Considerations.
%             \item Our zkID:
%                 * preprocessing 
%         \end{itemize}
%     \end{itemize} 
% \end{itemize}
\clearpage
\tableofcontents

\clearpage
\section{Introduction}
\label{sec:introduction}
%\input{intro}
\input{intro2}

\section{Technical Overview and Applicability to EUDI ARF}
\label{sec:appeudi}

\input{paper/actal_eudi}

% \jbel{Links to read (we can basically copy paste a lot from these):
% \begin{itemize}
% \item EUDI ARF (full) \href{https://eu-digital-identity-wallet.github.io/eudi-doc-architecture-and-reference-framework/latest/}{here}
% \item Discussion of Google/Microsoft pros/cons \href{https://github.com/eu-digital-identity-wallet/eudi-doc-standards-and-technical-specifications/blob/main/docs/technical-specifications/ts4-zkp.md}{here}
% \item Google's IETF draft for libZK \href{https://www.ietf.org/id/draft-google-cfrg-libzk-00.html#name-sumcheck}{here}
% \end{itemize}}

% Why should EUDI consider this report?
% \begin{itemize}
%     \item Does it compatible with current EUDI decision like data format and ecosystems?
%     \item Why governments or organizations should choose this scheme?
%     \item \textbf{Our pros and cons are already shown in other sections, so just mentioned them when we need them in this section}
% \end{itemize}

% \section{Preliminaries}
% \label{sec:preliminaries}
% \ndhy{This section is a work in progress. It will be completed in the next few days.}
% \input{preliminaries}

% Give a detailed answer and analysis for:
% \begin{itemize}
%     \item Is the scheme a dishonest majority setting or something else? What happens when the setting is broken?
%     \jbel{\begin{itemize}
%         \item ZK is addressing malicious verifier -- semihonest 
%         \item soundness -- address malicious prover
%         \item trust assumption - verifier is trusted/honest, issuer is trusted/honest
%         \item deniable presentation? -- ask YT
%     \end{itemize}}
        
%     \item If the Issuer needs to update frequently, what if they are disconnected for a while? 
%     \item Place the scheme into a poor network connection, does it still work well and not be vulnerable?
%     \jbel{depends on solution to revocation flow, and also what applications of ID presentation look like (e.g. are the prover and verifier talking through internet channels?)}
% 	\item If it fails during the process, what will happen?
% 	\item If it is not quantum resistant, how do we upgrade it to quantum resistant? -- it is quantum resistant
% \end{itemize}

\section{Technical Details}\label{sec:contribution}
In this section, we provide technical details of our OpenAC design.
In Section~\ref{ssec:preprocessing}, we discuss splitting the credential relation into two parts, \emph{Prepare} and \emph{Show}, and explain how these two relations are linked in the final construction. 
In Section~\ref{subsec:adding-zk}, since our instantiation relies on \emph{Spartan} for arithmetization and Spartan does not natively provide zero-knowledge, we describe how to add zero-knowledgeness to the Spartan arithmetization layer and analyze the security of this extension.
Finally, in Section~\ref{ssec:security}, we conclude with a high-level sketch of the security analysis for the full construction.


% \textit{main deliveries: 1. describe zkID; 2. the detailed construction}
\input{zkID_construction.tex}

% \section{Security}
% \label{sec:security}

% \input{security}

\section{Cost Analysis and Benchmarks}
\label{sec:benchmarks}
\input{experiments.tex}
% \begin{enumerate}
%     \item What are the exact communication, computation, and storage costs of \begin{itemize}
%         \item The PID Provider \& Verifier.
%         \item User who uses a mobile (iOS, Android) or browser?
%         \item The detailed cost of setup, proving, and verifying steps.
%     \end{itemize}
%     \item What is the minimum hardware configuration? 
% \end{enumerate}

% \textbf{We can extract the benchmark results from \href{https://hackmd.io/@clientsideproving/zkIDBenchmarks}{this doc} (it's \href{https://github.com/privacy-scaling-explorations/zkid-benchmarks}{git repo}) }

% \jbel{Still waiting 1-2 weeks for benchmarks on the POC}

% Notably, we also show the detailed comparison between our zkID and solutions from GG and Microsoft.

\section{Related Work}
\input{paper/BBSp}

\medskip

\input{paper/crescent}

\medskip

\input{paper/longfellow}

\medskip

% \input{paper/vega}

\section{Conclusion}
\label{sec:conclusion}
% \kwnote{Update the text with the new name: OpenAC or something else.}
% The zkID construction is an efficient instantiation of the anonymous credentials primitive, and supports the high-level requirements of the EU Digital Identity Wallet. It has been instantiated using multiple proof systems, each with different security assumptions and performance characteristics. This work presented a detailed mapping of these requirements to the generic zkID construction, as well as a best-in-class implementation that minimizes latency during credential presentation, while avoiding a trusted setup. Since our design avoids re-doing the costly computations live for each presentation, it is particularly suited for use-cases in which multi-credential linking is necessary.

% The zkID construction is but one component of a larger digital identity infrastructure. Related, but orthogonal, future directions for research include:
% \begin{itemize}
%     \item credibly neutral infrastructure for hosting issuer, verifier, and data registries;
%     \item more expressive semantics for verifier requests;
%     \item support for more features such as revocation, plausible deniability, and guardianship;
%     \item compatible credential data models.
% \end{itemize}

The OpenAC construction provides an efficient instantiation of anonymous credentials that aligns with 
the high-level requirements of the EU Digital Identity Wallet. It has been realized using multiple 
proof systems, each with distinct security assumptions and performance trade-offs. This work presents 
a detailed mapping between these requirements and the generic zkID construction, together with a 
best-in-class implementation that minimizes online latency during credential presentation while 
avoiding any trusted setup. Because the design amortizes expensive computation and avoids re-running 
issuer-verification logic for each presentation, it is especially well-suited for scenarios requiring 
multi-credential linking.

The OpenAC construction forms a single component within a broader digital-identity ecosystem. Several 
related, but orthogonal, research directions remain open:
\begin{itemize}
    \item credibly neutral infrastructure for operating issuer, verifier, and data registries;
    \item richer and more expressive semantics for verifier request policies;
    \item support for additional features such as revocation, plausible deniability, and guardianship;
    \item interoperable and compatible credential data models.
\end{itemize}



\clearpage
\section*{Contributors and Acknowledgement}
\begin{description}
	\item[Ying Tong] took primary responsibility for the design and construction of the proposed scheme.
    \item[Liam Eagen] authored the zero-knowledge modifications to Spartan, and contributed to the proof reblinding construction.
    \item[Vikas Rushi] led the design, implementation, and benchmarking of the component.
    \item[Moven Tsai] contributed to the mobile benchmarking and the witness generation optimisation efforts.
	\item[Hy Ngo \& Janabel Xia] contributed to the analysis of EUDI requirements, the preparation of the associated appendix, and the writing and revisions of the manuscript.
\end{description}

We thank Nam and Zoey for extensive revisions to the manuscript and for support that facilitated the completion of this work.
We also thank Keewoo for their detailed comments across multiple rounds of internal review.
We further thank Oskar, Winderica, Miha, and Vivian for feedback that strengthened the technical content of the paper.

AI tools are extensively used for the non-technical part of the document as well as for the correction of grammar and typos.

\clearpage
%%%% 8. BILBIOGRAPHY %%%%
\bibliographystyle{alpha}
\bibliography{abbrev0,crypto,biblio,references}
%%%% NOTESr
% - Download abbrev3.bib and crypto.bib from https://cryptobib.di.ens.fr/
% - Use biblio.bib for additional references not in the cryptobib database.
%   If possible, take them from DBLP.

\clearpage
\begin{landscape}
\section{Appendix: EUDI Annex 2 Requirements}
\label{sec:annex}
\input{annex2}
\end{landscape}
% This section is devoted to a review of the EUDI ARF's Annex 2, which covers high-level requirements for the EUDI Wallet. 
% The full Annex can be found \href{https://eu-digital-identity-wallet.github.io/eudi-doc-architecture-and-reference-framework/1.4.0/annexes/annex-2/annex-2om-high-level-requirements/#a231-topic-1-accessing-public-and-private-online-services-with-eudi-wallet}{here}.

\end{document}
